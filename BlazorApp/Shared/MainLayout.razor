@inherits LayoutComponentBase
@inject IJSRuntime jsRuntime

<PageTitle>HCA Healthcare</PageTitle>

<div class="page">
	<NavMenu />
	<div class="body">
		<div class="top-row px-4">
			@* <a href="https://docs.microsoft.com/aspnet/" target="_blank" class="underline">About</a> *@
		</div>
		<div class="bottom-line"></div>
		<main>
			@Body
		</main>
	</div>
</div>

<script>
    function testing() {
      const topFade = document.querySelector(".topFade");
      const bottomFade = document.querySelector(".bottomFade");
      const scrollY = document.querySelector("main").scrollTop;
      topFade.style.height = Math.min(5, scrollY * 0.05) + "em";

      const rect = document.querySelector(".container").getBoundingClientRect();
      bottomFade.style.height = Math.min(5, Math.max(0, (rect.bottom - window.innerHeight) * 0.05)) + "em";
      console.log(Math.min(5, (rect.bottom - window.innerHeight) * 0.05));
    }

    // Attach scroll listeners
    document.addEventListener("scroll", testing, true);
    document.addEventListener("scrollend", testing, true);

    // Attach resize listener for window resizing
    window.addEventListener("resize", testing);

    // Ensure state update when the DOM is fully loaded
    document.addEventListener("DOMContentLoaded", testing);

    // Run testing when the page is loaded (initial load)
    window.addEventListener("load", testing);

    // Handle changes in the URL hash (anchor links)
    window.addEventListener("hashchange", testing);

    // Ensure proper state update when navigating between pages in a single-page app (SPA)
    window.addEventListener("popstate", testing);

    setTimeout(() => { new ResizeObserver(testing).observe(document.querySelector(".container")) },100)


</script>
